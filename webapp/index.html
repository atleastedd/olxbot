<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OLX –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | GitHub Pages</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* –°—Ç–∏–ª–∏ —Ç–∞–∫–∏–µ –∂–µ –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { background: white; max-width: 400px; margin: 0 auto; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; text-align: center; }
        .logo { font-size: 40px; margin-bottom: 10px; }
        .title { font-size: 22px; font-weight: bold; }
        .subtitle { font-size: 14px; opacity: 0.9; margin-top: 5px; }
        .content { padding: 25px; }
        .step { display: flex; align-items: center; margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #667eea; }
        .step-number { width: 30px; height: 30px; background: #667eea; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; font-weight: bold; }
        .step-text { flex: 1; font-size: 14px; color: #333; }
        input { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; margin-bottom: 15px; font-size: 14px; }
        input:focus { outline: none; border-color: #667eea; }
        .btn { width: 100%; padding: 14px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; margin: 5px 0; display: flex; align-items: center; justify-content: center; gap: 10px; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102,126,234,0.4); }
        .btn-secondary { background: #f8f9fa; color: #667eea; border: 2px solid #e0e0e0; }
        .status { padding: 15px; border-radius: 8px; margin: 15px 0; display: none; text-align: center; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; display: block; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; display: block; }
        .loading { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; display: block; }
        .note { font-size: 12px; color: #666; text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ü§ñ</div>
            <div class="title">OLX –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</div>
            <div class="subtitle">GitHub Pages –≤–µ—Ä—Å–∏—è</div>
        </div>
        
        <div class="content">
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-text">–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–∞</div>
            </div>
            
            <input type="text" id="accountName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–æ–π OLX" maxlength="30">
            
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-text">–û—Ç–∫—Ä–æ–π—Ç–µ OLX –∏ –≤–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç</div>
            </div>
            
            <button class="btn btn-primary" onclick="openOLX()">
                <span>üåê</span> –û—Ç–∫—Ä—ã—Ç—å OLX –¥–ª—è –≤—Ö–æ–¥–∞
            </button>
            
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-text">–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ</div>
            </div>
            
            <button class="btn btn-secondary" id="saveBtn" onclick="saveAccount()" style="display: none;">
                <span>üíæ</span> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
            </button>
            
            <div id="status" class="status"></div>
            
            <div class="note">
                üîí –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ GitHub Pages<br>
                –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ –±–æ—Ç–∞
            </div>
        </div>
    </div>
    
    <script>
        // Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();
        
        // –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('user_id') || 'unknown';
        const username = urlParams.get('username') || 'user';
        
        let olxWindow = null;
        
        function showStatus(type, message) {
            const status = document.getElementById('status');
            status.className = 'status ' + type;
            status.textContent = message;
            status.style.display = 'block';
        }
        
        function openOLX() {
            const accountName = document.getElementById('accountName').value.trim();
            
            if (!accountName) {
                showStatus('error', '‚ùå –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞');
                return;
            }
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º OLX
            olxWindow = window.open(
                'https://www.olx.kz/identity/',
                '_blank'
            );
            
            if (olxWindow) {
                document.getElementById('saveBtn').style.display = 'flex';
                showStatus('success', '‚úÖ OLX –æ—Ç–∫—Ä—ã—Ç. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç.');
                
                // –î–µ–º–æ-—Ç–∞–π–º–µ—Ä –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –≤—Ö–æ–¥–∞
                setTimeout(() => {
                    showStatus('loading', '‚è≥ –û–±–Ω–∞—Ä—É–∂–µ–Ω –≤—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç...');
                }, 3000);
                
                setTimeout(() => {
                    showStatus('success', '‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç.');
                }, 7000);
            } else {
                showStatus('error', '‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ. –†–∞–∑—Ä–µ—à–∏—Ç–µ –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞.');
            }
        }
        
        function saveAccount() {
            const accountName = document.getElementById('accountName').value.trim();
            
            if (!accountName) {
                showStatus('error', '‚ùå –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞');
                return;
            }
            
            showStatus('loading', '‚è≥ –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞–∫–∫–∞—É–Ω—Ç...');
            
            // –°–æ–∑–¥–∞–µ–º –¥–µ–º–æ-–∫—É–∫–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –æ–Ω–∏ –±—É–¥—É—Ç —Ä–µ–∞–ª—å–Ω—ã–º–∏)
            const demoCookies = [
                {
                    name: 'auth_token',
                    value: 'demo_' + Date.now(),
                    domain: '.olx.kz',
                    path: '/',
                    secure: true,
                    httpOnly: false
                }
            ];
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–∞
            const data = {
                user_id: userId,
                account_name: accountName,
                cookies: demoCookies,
                timestamp: new Date().toISOString(),
                source: 'github_pages'
            };
            
            tg.sendData(JSON.stringify(data));
            
            showStatus('success', '‚úÖ –ê–∫–∫–∞—É–Ω—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω! –ó–∞–∫—Ä—ã–≤–∞–µ–º...');
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º WebApp —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                tg.close();
            }, 2000);
        }
        
        // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
        document.getElementById('accountName').focus();
        
        // Enter –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è OLX
        document.getElementById('accountName').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') openOLX();
        });
    </script>
</body>
</html>
